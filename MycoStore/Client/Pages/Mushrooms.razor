@page "/mushrooms"
@using MycoStore.Shared
@using MycoStore.Client.Services
@inject CartService CartService

<h3>Mushroom Products</h3>

@foreach (ProductType type in Enum.GetValues(typeof(ProductType)))
{
    <h4>@type</h4>
    <div class="row">
        @foreach (var product in AllProducts.Where(p => p.Type == type))
        {
            <div class="col-md-4 mb-4">
                <div class="card">
                    <img class="card-img-top" src="@product.ImageUrl" alt="@product.Name" />
                    <div class="card-body">
                        <h5 class="card-title">@product.Name</h5>
                        <p class="card-text">@product.Description</p>
                        <p><strong>Use:</strong> @product.Use</p>
                        <p><strong>Price:</strong> @product.Price.ToString("C", System.Globalization.CultureInfo.GetCultureInfo("fr-FR"))</p>
                        <button class="btn btn-primary" @onclick="() => CartService.AddToCart(product)">Add to Cart</button>
                    </div>
                </div>
            </div>
        }
    </div>
}

@code {
    private List<MushroomProduct> AllProducts = new()
    {
        new MushroomProduct
        {
            Id = 1,
            Name = "Reishi Culture",
            Description = "Reishi mycelium culture",
            Use = MushroomUse.Medicinal,
            Price = 12.99m,
            ImageUrl = "images/reishi.jpg",
            Type = ProductType.Culture
        },
        new MushroomProduct
        {
            Id = 2,
            Name = "Lion’s Mane GrowBox",
            Description = "Ready to grow Lion’s Mane",
            Use = MushroomUse.Medicinal,
            Price = 29.99m,
            ImageUrl = "images/lionsmane_box.jpg",
            Type = ProductType.GrowBox
        },
        new MushroomProduct
        {
            Id = 3,
            Name = "Shiitake Dried",
            Description = "Premium dried shiitake mushrooms",
            Use = MushroomUse.Edible,
            Price = 9.99m,
            ImageUrl = "images/shiitake_dried.jpg",
            Type = ProductType.DryMushroom
        },
        new MushroomProduct
        {
            Id = 4,
            Name = "Reishi Extract",
            Description = "Concentrated extract of Reishi mushroom",
            Use = MushroomUse.Medicinal,
            Price = 19.99m,
            ImageUrl = "images/reishi_extract.jpg",
            Type = ProductType.TinctureExtract
        }
    };
}
